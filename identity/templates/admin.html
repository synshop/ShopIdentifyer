<!DOCTYPE html>
<html>

<title>SYN Shop Admin Interface</title>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/static/images/favicon.ico" rel="shortcut icon" >
  <link href="/static/css/bootstrap.min.css" rel="stylesheet">
  <script src="/static/js/bootstrap.bundle.min.js"></script>
</head>

<body>

  <nav class="navbar bg-primary" data-bs-theme="dark" style="margin-bottom:30px;">
    <div class="container-fluid">
      <a class="navbar-brand">
        SYN Shop Identity Management
      </a>
      <ul class="navbar-nav">
        {% if session.logged_in %}
        <li class="nav-item"><a class="nav-link active" aria-current="page" href="/logout">Logout</a></li>
        {% else %}
        <li class="nav-item"><a class="nav-link active" aria-current="page" href="/login">Login</a></li>
        {% endif %}  
      </ul>
    </div>
  </nav>

<div class="container" style="padding-bottom:30px;">

  <div class="list-group" style="padding-bottom:30px;">

    <h2>What do you want to do?</h2>
    <a href="/admin/onboard" class="list-group-item">Onboard New Members</a>
    <a href="/admin/reactivate" class="list-group-item">Reactivate Member</a>
    <a href="/admin/eventlog" class="list-group-item">View Access Control Event Log</a>
    <a href="/admin/dooraccess" class="list-group-item">RFID Token Management</a>

  </div>

  <h2>There are currently {{entries|length}} Active Members at SYN Shop</h2>
  <table class="table table-hover table-bordered" id="results" style="width: 100%;">
      <thead>
      <tr class="table-primary">
        <th>Full Name</th>
        <th>Is Vetted?</th>
        <th>Plan</th>
        <th>Status</th>
        <th>Payment Status</th>
        <th>Has RFIDs</th>
      </tr>
      </thead>
      <tbody>
      {% for entry in entries %}
        {% if entry[7] == "past_due" or entry[7] == None or entry[8] == None or entry[8] | upper == "PAUSED MEMBERSHIP" %}
          <tr class="table-warning">
        {% else %}
          <tr>
        {% endif %}
          <td><a href="/member/{{ entry[0] }}">{{ entry[2] }}</a></td>

          {% if entry[3] == "NOT VETTED" %}
            <td>{{ entry[3] }}</td>
          {% else %}
            {% if entry[5] == None %}
              <!-- Member is vetted but no vetted form on file -->
              <td>VETTED</td>
            {% else %}
              <td><a href="/member/{{ entry[0] }}/files/vetted-membership-form.pdf">VETTED</a></td>
            {% endif %}
          {% endif %}
          
          {% if entry[8] == None %}
            <td>NO SUBSCRIPTION PLAN</td>
          {% else %}
            <td>{{ entry[8] | upper }}</td>
          {% endif %}
          
          {% if entry[7] == None %}
            <td>NOT AVAILABLE</td>
          {% else %}
            <td>{{ entry[7] | upper }}</td>
          {% endif %}
          
          {% if entry[9] == None %}
            <td>N / A</td>
          {% else %}
            <td>{{ entry[9] | upper }}</td>
          {% endif %}

          <td>{{ entry[10] | upper }}</td>

      </tr>
      {% else %}
        <tr><td colspan="3">No entries here so far</td></tr>
      {% endfor %}

    </tbody>
  </table>

</div>

</body>
</html>
